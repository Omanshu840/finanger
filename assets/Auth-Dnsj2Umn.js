import{c as te,r as f,u as ne,a as re,j as e,b as oe,d as ie,P as C,e as U,R as le,I as ce,f as T,g as de,h as S,i as ue,k as me,W as xe,B as F,L,l as pe,t as p}from"./index-DdK16y59.js";import{o as D,s as k,u as M,a as _,C as fe,b as ge,c as he,d as be,e as je,F as A,f as b,g as j,h as v,i as w,I as y,j as N}from"./form-BDOGftsx.js";import{M as R}from"./mail-Ds0dhXfk.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],E=te("lock",ve),we=D({email:k().email("Please enter a valid email address"),password:k().min(6,"Password must be at least 6 characters")}),ye=D({email:k().email("Please enter a valid email address"),password:k().min(6,"Password must be at least 6 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:k()}).refine(s=>s.password===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Ne=D({email:k().email("Please enter a valid email address")});var P="Tabs",[ke]=oe(P,[U]),Y=U(),[Ce,G]=ke(P),B=f.forwardRef((s,n)=>{const{__scopeTabs:u,value:i,onValueChange:a,defaultValue:l,orientation:c="horizontal",dir:x,activationMode:m="automatic",...g}=s,t=ne(x),[o,d]=re({prop:i,onChange:a,defaultProp:l??"",caller:P});return e.jsx(Ce,{scope:u,baseId:ie(),value:o,onValueChange:d,orientation:c,dir:t,activationMode:m,children:e.jsx(C.div,{dir:t,"data-orientation":c,...g,ref:n})})});B.displayName=P;var W="TabsList",K=f.forwardRef((s,n)=>{const{__scopeTabs:u,loop:i=!0,...a}=s,l=G(W,u),c=Y(u);return e.jsx(le,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:i,children:e.jsx(C.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:n})})});K.displayName=W;var O="TabsTrigger",q=f.forwardRef((s,n)=>{const{__scopeTabs:u,value:i,disabled:a=!1,...l}=s,c=G(O,u),x=Y(u),m=J(c.baseId,i),g=Q(c.baseId,i),t=i===c.value;return e.jsx(ce,{asChild:!0,...x,focusable:!a,active:t,children:e.jsx(C.button,{type:"button",role:"tab","aria-selected":t,"aria-controls":g,"data-state":t?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:m,...l,ref:n,onMouseDown:T(s.onMouseDown,o=>{!a&&o.button===0&&o.ctrlKey===!1?c.onValueChange(i):o.preventDefault()}),onKeyDown:T(s.onKeyDown,o=>{[" ","Enter"].includes(o.key)&&c.onValueChange(i)}),onFocus:T(s.onFocus,()=>{const o=c.activationMode!=="manual";!t&&!a&&o&&c.onValueChange(i)})})})});q.displayName=O;var H="TabsContent",Z=f.forwardRef((s,n)=>{const{__scopeTabs:u,value:i,forceMount:a,children:l,...c}=s,x=G(H,u),m=J(x.baseId,i),g=Q(x.baseId,i),t=i===x.value,o=f.useRef(t);return f.useEffect(()=>{const d=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(d)},[]),e.jsx(de,{present:a||t,children:({present:d})=>e.jsx(C.div,{"data-state":t?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":m,hidden:!d,id:g,tabIndex:0,...c,ref:n,style:{...s.style,animationDuration:o.current?"0s":void 0},children:d&&l})})});Z.displayName=H;function J(s,n){return`${s}-trigger-${n}`}function Q(s,n){return`${s}-content-${n}`}var Se=B,Pe=K,Ie=q,Te=Z;function Fe({className:s,...n}){return e.jsx(Se,{"data-slot":"tabs",className:S("flex flex-col gap-2",s),...n})}function Le({className:s,...n}){return e.jsx(Pe,{"data-slot":"tabs-list",className:S("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...n})}function V({className:s,...n}){return e.jsx(Ie,{"data-slot":"tabs-trigger",className:S("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n})}function $({className:s,...n}){return e.jsx(Te,{"data-slot":"tabs-content",className:S("flex-1 outline-none",s),...n})}function Re(){const s=ue(),{signIn:n,signUp:u,signInWithMagicLink:i}=me(),[a,l]=f.useState(!1),[c,x]=f.useState(!1),[m,g]=f.useState(0),t=pe(),o=M({resolver:_(we),defaultValues:{email:"",password:""}}),d=M({resolver:_(ye),defaultValues:{email:"",password:"",confirmPassword:""}}),I=M({resolver:_(Ne),defaultValues:{email:""}}),X=async r=>{if(!t){p.error("You are offline",{description:"Please check your internet connection"});return}l(!0);const{error:h}=await n(r.email,r.password);h?p.error("Sign in failed",{description:h.message||"Invalid email or password"}):s("/dashboard"),l(!1)},ee=async r=>{if(!t){p.error("You are offline",{description:"Please check your internet connection"});return}l(!0);const{error:h}=await u(r.email,r.password);h?p.error("Sign up failed",{description:h.message}):(p.success("Account created!",{description:"Please check your email to verify your account",duration:6e3}),d.reset()),l(!1)},se=async r=>{if(!t){p.error("You are offline",{description:"Please check your internet connection"});return}if(m>0){p.error("Please wait",{description:`You can request another link in ${m} seconds`});return}l(!0);const{error:h}=await i(r.email);if(h)p.error("Failed to send magic link",{description:h.message});else{x(!0),p.success("Magic link sent!",{description:"Check your email for the sign-in link",duration:6e3}),g(60);const ae=setInterval(()=>{g(z=>z<=1?(clearInterval(ae),0):z-1)},1e3)}l(!1)};return e.jsx("div",{className:"flex items-center justify-center min-h-screen w-full px-4 bg-gradient-to-br from-background to-muted",children:e.jsxs(fe,{className:"w-full max-w-md",children:[e.jsxs(ge,{className:"space-y-1",children:[e.jsx(he,{className:"text-3xl font-bold text-center",children:"Finance Tracker"}),e.jsx(be,{className:"text-center",children:"Sign in to manage your expenses and investments"}),!t&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg mt-4",children:[e.jsx(xe,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"You are currently offline"})]})]}),e.jsx(je,{children:e.jsxs(Fe,{defaultValue:"signin",className:"w-full",children:[e.jsxs(Le,{className:"grid w-full grid-cols-3",children:[e.jsx(V,{value:"signin",children:"Sign In"}),e.jsx(V,{value:"signup",children:"Sign Up"}),e.jsx(V,{value:"magic",children:"Magic Link"})]}),e.jsx($,{value:"signin",children:e.jsx(A,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(X),className:"space-y-4 mt-4",children:[e.jsx(b,{control:o.control,name:"email",render:({field:r})=>e.jsxs(j,{children:[e.jsx(v,{children:"Email"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{...r,type:"email",placeholder:"you@example.com",className:"pl-10",disabled:a||!t,autoComplete:"email"})]})}),e.jsx(N,{})]})}),e.jsx(b,{control:o.control,name:"password",render:({field:r})=>e.jsxs(j,{children:[e.jsx(v,{children:"Password"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{...r,type:"password",placeholder:"••••••••",className:"pl-10",disabled:a||!t,autoComplete:"current-password"})]})}),e.jsx(N,{})]})}),e.jsxs(F,{type:"submit",className:"w-full",disabled:a||!t,children:[a&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Signing in...":"Sign In"]})]})})}),e.jsx($,{value:"signup",children:e.jsx(A,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(ee),className:"space-y-4 mt-4",children:[e.jsx(b,{control:d.control,name:"email",render:({field:r})=>e.jsxs(j,{children:[e.jsx(v,{children:"Email"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{...r,type:"email",placeholder:"you@example.com",className:"pl-10",disabled:a||!t,autoComplete:"email"})]})}),e.jsx(N,{})]})}),e.jsx(b,{control:d.control,name:"password",render:({field:r})=>e.jsxs(j,{children:[e.jsx(v,{children:"Password"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{...r,type:"password",placeholder:"••••••••",className:"pl-10",disabled:a||!t,autoComplete:"new-password"})]})}),e.jsx(N,{})]})}),e.jsx(b,{control:d.control,name:"confirmPassword",render:({field:r})=>e.jsxs(j,{children:[e.jsx(v,{children:"Confirm Password"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{...r,type:"password",placeholder:"••••••••",className:"pl-10",disabled:a||!t,autoComplete:"new-password"})]})}),e.jsx(N,{})]})}),e.jsxs(F,{type:"submit",className:"w-full",disabled:a||!t,children:[a&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Creating account...":"Create Account"]})]})})}),e.jsx($,{value:"magic",children:e.jsx(A,{...I,children:e.jsxs("form",{onSubmit:I.handleSubmit(se),className:"space-y-4 mt-4",children:[e.jsx(b,{control:I.control,name:"email",render:({field:r})=>e.jsxs(j,{children:[e.jsx(v,{children:"Email"}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{...r,type:"email",placeholder:"you@example.com",className:"pl-10",disabled:a||!t,autoComplete:"email"})]})}),e.jsx(N,{})]})}),c&&e.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Check your email for the magic link to sign in"})}),e.jsxs(F,{type:"submit",className:"w-full",disabled:a||!t||m>0,children:[a&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),m>0?`Resend in ${m}s`:a?"Sending...":"Send Magic Link"]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"We'll send you a one-time link to sign in instantly"})]})})})]})})]})})}export{Re as default};
