import{c as O,u as R,a as _,r as w,j as e,W as $,B as b,L as y,i as q,t as n}from"./index-4zS9zYSY.js";import{o as I,s as h,u as N,a as v,F as k,b as o,c,d,e as m,M as S,f as u}from"./form-Z6e9nC6i.js";import{C as D,a as H,b as Z,c as G,d as J,I as x}from"./label-qlvPDQ9l.js";import{T as K,a as Q,b as C,c as P}from"./tabs-DHKa1uC3.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],L=O("lock",X),ee=I({email:h().email("Please enter a valid email address"),password:h().min(6,"Password must be at least 6 characters")}),se=I({email:h().email("Please enter a valid email address"),password:h().min(6,"Password must be at least 6 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:h()}).refine(j=>j.password===j.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),ae=I({email:h().email("Please enter a valid email address")});function ie(){const j=R(),{signIn:T,signUp:A,signInWithMagicLink:E}=_(),[a,t]=w.useState(!1),[U,V]=w.useState(!1),[p,F]=w.useState(0),r=q(),g=N({resolver:v(ee),defaultValues:{email:"",password:""}}),i=N({resolver:v(se),defaultValues:{email:"",password:"",confirmPassword:""}}),f=N({resolver:v(ae),defaultValues:{email:""}}),Y=async s=>{if(!r){n.error("You are offline",{description:"Please check your internet connection"});return}t(!0);const{error:l}=await T(s.email,s.password);l?n.error("Sign in failed",{description:l.message||"Invalid email or password"}):j("/dashboard"),t(!1)},W=async s=>{if(!r){n.error("You are offline",{description:"Please check your internet connection"});return}t(!0);const{error:l}=await A(s.email,s.password);l?n.error("Sign up failed",{description:l.message}):(n.success("Account created!",{description:"Please check your email to verify your account",duration:6e3}),i.reset()),t(!1)},z=async s=>{if(!r){n.error("You are offline",{description:"Please check your internet connection"});return}if(p>0){n.error("Please wait",{description:`You can request another link in ${p} seconds`});return}t(!0);const{error:l}=await E(s.email);if(l)n.error("Failed to send magic link",{description:l.message});else{V(!0),n.success("Magic link sent!",{description:"Check your email for the sign-in link",duration:6e3}),F(60);const B=setInterval(()=>{F(M=>M<=1?(clearInterval(B),0):M-1)},1e3)}t(!1)};return e.jsx("div",{className:"flex items-center justify-center min-h-screen w-full px-4 bg-gradient-to-br from-background to-muted",children:e.jsxs(D,{className:"w-full max-w-md",children:[e.jsxs(H,{className:"space-y-1",children:[e.jsx(Z,{className:"text-3xl font-bold text-center",children:"Finance Tracker"}),e.jsx(G,{className:"text-center",children:"Sign in to manage your expenses and investments"}),!r&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg mt-4",children:[e.jsx($,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"You are currently offline"})]})]}),e.jsx(J,{children:e.jsxs(K,{defaultValue:"signin",className:"w-full",children:[e.jsxs(Q,{className:"grid w-full grid-cols-3",children:[e.jsx(C,{value:"signin",children:"Sign In"}),e.jsx(C,{value:"signup",children:"Sign Up"}),e.jsx(C,{value:"magic",children:"Magic Link"})]}),e.jsx(P,{value:"signin",children:e.jsx(k,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(Y),className:"space-y-4 mt-4",children:[e.jsx(o,{control:g.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(x,{...s,type:"email",placeholder:"you@example.com",className:"pl-10",disabled:a||!r,autoComplete:"email"})]})}),e.jsx(u,{})]})}),e.jsx(o,{control:g.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(x,{...s,type:"password",placeholder:"••••••••",className:"pl-10",disabled:a||!r,autoComplete:"current-password"})]})}),e.jsx(u,{})]})}),e.jsxs(b,{type:"submit",className:"w-full",disabled:a||!r,children:[a&&e.jsx(y,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Signing in...":"Sign In"]})]})})}),e.jsx(P,{value:"signup",children:e.jsx(k,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(W),className:"space-y-4 mt-4",children:[e.jsx(o,{control:i.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(x,{...s,type:"email",placeholder:"you@example.com",className:"pl-10",disabled:a||!r,autoComplete:"email"})]})}),e.jsx(u,{})]})}),e.jsx(o,{control:i.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(x,{...s,type:"password",placeholder:"••••••••",className:"pl-10",disabled:a||!r,autoComplete:"new-password"})]})}),e.jsx(u,{})]})}),e.jsx(o,{control:i.control,name:"confirmPassword",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Confirm Password"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(x,{...s,type:"password",placeholder:"••••••••",className:"pl-10",disabled:a||!r,autoComplete:"new-password"})]})}),e.jsx(u,{})]})}),e.jsxs(b,{type:"submit",className:"w-full",disabled:a||!r,children:[a&&e.jsx(y,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Creating account...":"Create Account"]})]})})}),e.jsx(P,{value:"magic",children:e.jsx(k,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(z),className:"space-y-4 mt-4",children:[e.jsx(o,{control:f.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(x,{...s,type:"email",placeholder:"you@example.com",className:"pl-10",disabled:a||!r,autoComplete:"email"})]})}),e.jsx(u,{})]})}),U&&e.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Check your email for the magic link to sign in"})}),e.jsxs(b,{type:"submit",className:"w-full",disabled:a||!r||p>0,children:[a&&e.jsx(y,{className:"mr-2 h-4 w-4 animate-spin"}),p>0?`Resend in ${p}s`:a?"Sending...":"Send Magic Link"]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"We'll send you a one-time link to sign in instantly"})]})})})]})})]})})}export{ie as default};
